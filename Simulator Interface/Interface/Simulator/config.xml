<!-- 
	Configulation of Raylaunching Solver
	(c) 2020 Takahiro Hashimoto
 -->

	<frequency>5.0e9</frequency>

<!-- geometory -->
	<is_free_space>false</is_free_space>
	<geometry_filename>Geometry.stl</geometry_filename>
	<num_material>1</num_material>
	<!-- specify materials upto num_material > 0 -->
	<material0>
		<!-- 0: none, 1: Fresnel, 2: slab, 4: from file -->
		<reflection_type>2</reflection_type>
		<transmission_type>2</transmission_type>
		<!-- 0: complex permittivity, 1: static permittivity and conductivity -->
		<epsilon_setting_mode>1</epsilon_setting_mode>
		<!--<complex_permittivity>
			<real>2.5</real><imag>-0.3</imag>
		</complex_permittivity> -->
		<static_permittivity>5.0</static_permittivity>
		<conductivity>0.01</conductivity>
		<is_impedance_boundary>false</is_impedance_boundary>
		<thickness>0.02</thickness>
		<is_diffuse_reflect>false</is_diffuse_reflect>
		<is_diffuse_transmit>false</is_diffuse_transmit>
		<!-- material0 is set to all faces by default -->
	</material0>
	<!--
  <material1>
		<!-- 0: none, 1: Fresnel, 2: slab, 4: from file 
		<reflection_type>2</reflection_type>
		<transmission_type>2</transmission_type> <!-- reflection and transmission type are set to 2 (slab) -->
		<!-- 0: complex permittivity, 1: static permittivity and conductivity 
		<epsilon_setting_mode>0</epsilon_setting_mode>
		<complex_permittivity>
			<real>9</real><imag>-0.9</imag>
		</complex_permittivity>
		<static_permittivity></static_permittivity>
		<conductivity>0.09</conductivity>
		<is_impedance_boundary>false</is_impedance_boundary>
		<thickness>0.31</thickness>
		<is_diffuse_reflect>false</is_diffuse_reflect>
		<is_diffuse_transmit>false</is_diffuse_transmit>
		<face_index>0,1,2,3,4,5,6,7,8,9,10,11</face_index> <!-- specify face indices when material number > 0 
	</material1> -->

	<reflection_coef_filename></reflection_coef_filename>
	<transmission_coef_filename></transmission_coef_filename>
	<diffuse_reflection_filename></diffuse_reflection_filename>
	<diffuse_transmission_filename></diffuse_transmission_filename>

	<is_diffract_isolated_edges>false</is_diffract_isolated_edges>

<!-- source -->
	<source_position> <x>0.835938</x> <y>4.539063</y> <z>2.5</z> </source_position>
	<transmitting_power_dBm>30</transmitting_power_dBm>
	<tx_antenna_pattern_file>HalfLengthDipole.dat</tx_antenna_pattern_file>
	<tx_axis> 
		<zx>0.0</zx> <zy>0.0</zy> <zz>1.0</zz>
		<xx>1.0</xx> <xy>0.0</xy> <xz>0.0</xz>
	</tx_axis>

<!-- launching -->
	<!-- 0: single ray (debug),     1: uniform rays,
	     2: uniform theta-phi rays, 3: non-uniform theta-phi rays-->
	<ray_launch_mode>2</ray_launch_mode>
  
  
	<!-- # of rays: 10*nt^2+2. Ray interval: 360/5/nt deg (approx.) -->
	<num_tesselate>101</num_tesselate>
	<num_tesselate_scat>10</num_tesselate_scat>
  
  
	<!-- # of rays: (ntheta-2)*nphi+2. Ray interval: 180/(ntheta-1), 360/nphi deg-->
	<num_theta>180</num_theta>
	<num_phi>360</num_phi>
	<theta_phi_launch_zaxis> <x>0.0</x> <y>0.0</y> <z>1.0</z> </launch_zaxis>
	<theta_phi_launch_xaxis> <x>1.0</x> <y>0.0</y> <z>0.0</z> </launch_xaxis>


	<!-- filtering by axis and angle -->
	<is_filter_rays_by_theta_angle>false</is_filter_rays_by_theta_angle>
	<is_filter_rays_by_phi_angle>false</is_filter_rays_by_phi_angle>
	<!--<launch_angle_theta_start_deg></launch_angle_theta_start_deg>
	<launch_angle_theta_end_deg></launch_angle_theta_end_deg>
	<launch_angle_phi_start_deg></launch_angle_phi_start_deg>
	<launch_angle_phi_end_deg></launch_angle_phi_end_deg>
	<launch_filter_zaxis> <x>1.0</x> <y>0.0</y> <z>0.0</z> </launch_filter_zaxis>
	<launch_filter_xaxis> <x>0.0</x> <y>1.0</y> <z>0.0</z> </launch_filter_xaxis>
  -->

	<!-- debug -->
	<is_filter_rays_by_launch_id>false</is_filter_rays_by_launch_id>
	<ray_id_to_launch></ray_id_to_launch>

	<!--single_launch>
		<dir0> <x>0.5</x> <y>-0.86603</y> <z>-0.1</z> </dir0>
		<dir1> <x>0.5</x> <y>-0.86603</y> <z> 0.1</z> </dir1>
		<dir2> <x>0.4</x> <y>-0.86603</y> <z> 0.0</z> </dir2>
	</single_launch> -->

<!-- tracing -->
	<num_reflection_max>1</num_reflection_max>
	<num_transmission_max>0</num_transmission_max>
  
	<num_diffraction_max>0</num_diffraction_max>
  
	<num_diffuse_reflection_max>0</num_diffuse_reflection_max>
	<num_diffuse_transmission_max>0</num_diffuse_transmission_max>
  
	<num_ray_diffraction>10</num_ray_diffraction>
	<is_restrict_diffracting_edge>true</is_restrict_diffracting_edge>
	<diffracting_edge_index>79, 1, 4, 72, 19, 26, 29, 70, 509, 385, 545, 539, 535, 516, 519, 292, 295, 277, 280, 62, 59, 248, 230, 227, 221, 216, 213, 209, 199, 268, 355, 358, 1161, 1159, 311, 314, 297, 125, 128, 377, 553</diffracting_edge_index>
  
	<tracing_field_threshold>0.0001</tracing_field_threshold>
	<diffuse_reflection_field_threshold>0.001</diffuse_reflection_field_threshold>
	<diffuse_transmission_field_threshold>0.001</diffuse_transmission_field_threshold>

<!-- captureing -->
	<!-- 0: position, 1: position and axis -->
	<receiver_position_load_type>0</receiver_position_load_type>
	<receiver_position_filename>ReceiverPositions.dat</receiver_position_filename>
	<is_limit_receivers>false</is_limit_receivers>
	<rx_antenna_pattern_file>HalfLengthDipole.dat</rx_antenna_pattern_file>
	<rx_axis> 
		<zx>0.0</zx> <zy>0.0</zy> <zz>1.0</zz>
		<xx>1.0</xx> <xy>0.0</xy> <xz>0.0</xz>
	</rx_axis>

	<!-- filtering -->
	<is_filter_nan_rays>true</is_filter_nan_rays>
	<is_filter_direct_rays>false</is_filter_direct_rays>
	<is_filter_low_power_rays>false</is_filter_low_power_rays>
	<power_truncation_threshold>30</power_truncation_threshold>
	<is_remove_duplicate_rays>true</is_remove_duplicate_rays>

<!-- output -->
	<!-- CSV -->
	<is_save_receivers_csv>true</is_save_receivers_csv>
	<is_save_electric_field_csv>true</is_save_electric_field_csv>
	<is_save_electric_field_matlab_csv>true</is_save_electric_field_matlab_csv>

	<!-- VTK (for visualization) -->
	<is_save_facemodel_vtk>true</is_save_facemodel_vtk>
	<is_save_edgemodel_vtk>true</is_save_edgemodel_vtk>
	<is_save_transmitter_vtk>true</is_save_transmitter_vtk>
	<is_save_tessellated_icosahedron_vtk>false</is_save_tessellated_icosahedron_vtk>
	<is_save_raytube_vtk>false</is_save_raytube_vtk>
	<is_save_receivers_vtk>true</is_save_receivers_vtk>
	<is_save_raypath_vtk>false</is_save_raypath_vtk>
	<vtk_length_max>10.0</vtk_length_max>
	
<!-- system -->
	<!-- 0: set maximum cpus -->
	<num_openmp_cpus>12</num_openmp_cpus>
	<num_log_interval>25</num_log_interval>